var PTApp=function(){var e;var t;var n={};var r;var i;var s={};var o={};var u={};var a={};this.dlgButton=$("#dialogButton");this.searchButton=$("#searchButton");this.ddMenu=$("#dropDownMenu");this.pokemonArray=[]};PTApp.prototype.openDialog=function(){var e=this;$("#dialogMessage").dialog({modal:true,width:600,show:{effect:"blind",duration:500},buttons:[{text:"Ok",click:function(){e.search(true);$(this).dialog("close")}},{text:"Cancel",click:function(){$(this).dialog("close")}}]})};PTApp.prototype.createDropDown=function(){var e=this;var t=e.ddMenu;$.ajax({url:"http://pokeapi.co/api/v1/pokedex/1/",type:"GET",dataType:"jsonp",success:function(n,r,i){e.pokedex=n;console.log("Get successful for /api/v1/pokedex/1");t.append('<option value="0" id="placeHold"></option>');e.pokemonArray.push("placeHold");for(ndx in e.pokedex.pokemon){t.append('<option value="'+(parseInt(ndx)+1)+'">'+e.pokedex.pokemon[ndx].name+"</option>");e.pokemonArray.push(e.pokedex.pokemon[ndx].name)}$("#dialogMessage").append(t)},error:function(e,t){console.log("There was an error processing this request")}})};PTApp.prototype.search=function(e){var t=this;var n=$("#searchBar").val();if(e)n=t.pokemonArray[$("#dropDownMenu").val()];if(n!=="placeHold"){var r="http://pokeapi.co/api/v1/pokemon/"+String(parseInt(n)?parseInt(n):n.toLowerCase());$.ajax({url:r,type:"GET",dataType:"jsonp",success:function(e,r,i){t.pokemon=e;console.log("Get successful for /api/v1/pokemon/"+String(parseInt(n)?parseInt(n):n.toLowerCase()));t.getSprite()},error:function(e,t){console.log("Something went wrong, try inputting the id of the "+"pokemon, or perhaps a hyphen with their gender (ex: nidoran-m)")}})}};PTApp.prototype.getSprite=function(){var e=this;$.ajax({url:"http://pokeapi.co/api/v1/sprite/"+String(e.pokemon.national_id+1),type:"GET",dataType:"jsonp",success:function(t,n,r){e.pokemonSprite=t;console.log("Get successful for /api/v1/sprite/");e.displayResults()},error:function(e,t){console.log("Failed to retrieve sprite")}})};PTApp.prototype.displayResults=function(){var e=this;var t;var n;var r;$("img#sprite").attr("src","http://pokeapi.co/"+e.pokemonSprite.image);t=e.firstToUpper(e.pokemon.types[0].name);n="None";if(e.pokemon.types[1])n=e.firstToUpper(e.pokemon.types[1].name);$("#typeSpan #type1").html(t).attr("style","color: "+this.typeArray[t]);$("#typeSpan #type2").html(n).attr("style","color: "+this.typeArray[n]);$("#speciesName").html(e.pokemon.name.toUpperCase());r="Abilities: ";for(ndx in e.pokemon.abilities)r+=e.firstToUpper(e.pokemon.abilities[ndx].name)+", ";r=r.substring(0,r.length-2);$("#abilities").html(r);e.getType1()};PTApp.prototype.getType1=function(){var e=this;var t=e.pokemon.types[0].resource_uri;var n=null;if(e.pokemon.types[1])n=e.pokemon.types[1].resource_uri;$.ajax({url:"http://pokeapi.co"+t,type:"GET",dataType:"jsonp",success:function(r,i,s){console.log("Get successful for "+t);e.type1=r;if(n)e.getType2(n);else e.displayResists()},error:function(e,n){console.log("Error getting "+t)}})};PTApp.prototype.getType2=function(e){var t=this;$.ajax({url:"http://pokeapi.co"+e,type:"GET",dataType:"jsonp",success:function(n,r,i){console.log("Get successful for "+e);t.type2=n;t.displayResists()},error:function(e,t){console.log("Error getting "+this.type)}})};PTApp.prototype.displayResists=function(){var e=this;var t;var n={};var r;var i;e.clearResists();for(type in e.typeArray)n[type]=null;for(type in n){t=e.firstToUpper(e.type1.name);i=e.typeEffectiveness[type][t];if(e.type2){t=e.firstToUpper(e.type2.name);i*=e.typeEffectiveness[type][t]}n[type]=i}for(type in n){if(n[type]>1){r="#weak"}else if(n[type]===1){r="#normal"}else if(n[type]<1&&n[type]>0){r="#resists"}else if(n[type]===0){r="#immune"}$(r).append($("<li>"+type+" ("+n[type]+"x)</li>").attr("style","color: "+e.typeArray[type]))}};PTApp.prototype.clearResists=function(){$("#weak").empty();$("#normal").empty();$("#resists").empty();$("#immune").empty()};PTApp.prototype.firstToUpper=function(e){return e.charAt(0).toUpperCase()+e.slice(1)};PTApp.prototype.configure=function(){var e=this;this.dlgButton.button().click(function(t){e.openDialog()});this.searchButton.button().click(function(t){e.search(false)});this.createDropDown();this.ddMenu.menu();this.typeArray={Grass:"#BDDC76",Water:"#63AAD4",Normal:"#E5C7B4",Fighting:"#8B675A",Flying:"#0094BA",Ground:"#B87F61",Bug:"#00DD9A",Ghost:"#622F7A",Psychic:"#DB4D9A",Ice:"#38959C",Dragon:"#7481A1",Dark:"#A7A7A6",Fairy:"#E66FE2",Fire:"#AD6F71",Steel:"#8C8C8E",Rock:"#E68000",Poison:"#DB83FD",Electric:"#FFFE00"};this.typeEffectiveness={Normal:{Normal:1,Fighting:1,Flying:1,Poison:1,Ground:1,Rock:.5,Bug:1,Ghost:0,Steel:.5,Fire:1,Water:1,Grass:1,Electric:1,Psychic:1,Ice:1,Dragon:1,Dark:1,Fairy:1},Fighting:{Normal:2,Fighting:1,Flying:.5,Poison:.5,Ground:1,Rock:2,Bug:.5,Ghost:0,Steel:2,Fire:1,Water:1,Grass:1,Electric:1,Psychic:.5,Ice:2,Dragon:1,Dark:2,Fairy:.5},Flying:{Normal:1,Fighting:2,Flying:1,Poison:1,Ground:1,Rock:.5,Bug:2,Ghost:1,Steel:.5,Fire:1,Water:1,Grass:2,Electric:.5,Psychic:1,Ice:1,Dragon:1,Dark:1,Fairy:1},Poison:{Normal:1,Fighting:1,Flying:1,Poison:.5,Ground:.5,Rock:.5,Bug:1,Ghost:.5,Steel:0,Fire:1,Water:1,Grass:2,Electric:1,Psychic:1,Ice:1,Dragon:1,Dark:1,Fairy:2},Ground:{Normal:1,Fighting:1,Flying:0,Poison:2,Ground:1,Rock:2,Bug:.5,Ghost:1,Steel:2,Fire:2,Water:1,Grass:.5,Electric:2,Psychic:1,Ice:1,Dragon:1,Dark:1,Fairy:1},Rock:{Normal:1,Fighting:.5,Flying:2,Poison:1,Ground:.5,Rock:1,Bug:2,Ghost:1,Steel:.5,Fire:2,Water:1,Grass:1,Electric:1,Psychic:1,Ice:2,Dragon:1,Dark:1,Fairy:1},Bug:{Normal:1,Fighting:.5,Flying:.5,Poison:.5,Ground:1,Rock:1,Bug:1,Ghost:.5,Steel:.5,Fire:.5,Water:1,Grass:2,Electric:1,Psychic:2,Ice:1,Dragon:1,Dark:2,Fairy:.5},Ghost:{Normal:0,Fighting:1,Flying:1,Poison:1,Ground:1,Rock:1,Bug:1,Ghost:2,Steel:1,Fire:1,Water:1,Grass:1,Electric:1,Psychic:2,Ice:1,Dragon:1,Dark:.5,Fairy:1},Steel:{Normal:1,Fighting:1,Flying:1,Poison:1,Ground:1,Rock:2,Bug:1,Ghost:1,Steel:.5,Fire:.5,Water:.5,Grass:1,Electric:.5,Psychic:1,Ice:2,Dragon:1,Dark:1,Fairy:2},Fire:{Normal:1,Fighting:1,Flying:1,Poison:1,Ground:1,Rock:.5,Bug:2,Ghost:1,Steel:2,Fire:.5,Water:.5,Grass:2,Electric:1,Psychic:1,Ice:2,Dragon:.5,Dark:1,Fairy:1},Water:{Normal:1,Fighting:1,Flying:1,Poison:1,Ground:2,Rock:2,Bug:1,Ghost:1,Steel:1,Fire:2,Water:.5,Grass:.5,Electric:1,Psychic:1,Ice:1,Dragon:.5,Dark:1,Fairy:1},Grass:{Normal:1,Fighting:1,Flying:.5,Poison:.5,Ground:2,Rock:2,Bug:.5,Ghost:1,Steel:.5,Fire:.5,Water:2,Grass:.5,Electric:1,Psychic:1,Ice:1,Dragon:.5,Dark:1,Fairy:1},Electric:{Normal:1,Fighting:1,Flying:2,Poison:1,Ground:0,Rock:1,Bug:1,Ghost:1,Steel:1,Fire:1,Water:2,Grass:.5,Electric:.5,Psychic:1,Ice:1,Dragon:.5,Dark:1,Fairy:1},Psychic:{Normal:1,Fighting:2,Flying:1,Poison:2,Ground:1,Rock:1,Bug:1,Ghost:1,Steel:.5,Fire:1,Water:1,Grass:1,Electric:1,Psychic:.5,Ice:1,Dragon:1,Dark:0,Fairy:1},Ice:{Normal:1,Fighting:1,Flying:2,Poison:1,Ground:2,Rock:1,Bug:1,Ghost:1,Steel:.5,Fire:.5,Water:.5,Grass:2,Electric:1,Psychic:1,Ice:.5,Dragon:2,Dark:1,Fairy:1},Dragon:{Normal:1,Fighting:1,Flying:1,Poison:1,Ground:1,Rock:1,Bug:1,Ghost:1,Steel:.5,Fire:1,Water:1,Grass:1,Electric:1,Psychic:1,Ice:1,Dragon:2,Dark:1,Fairy:0},Dark:{Normal:1,Fighting:.5,Flying:1,Poison:1,Ground:1,Rock:1,Bug:1,Ghost:2,Steel:1,Fire:1,Water:1,Grass:1,Electric:1,Psychic:2,Ice:1,Dragon:1,Dark:.5,Fairy:.5},Fairy:{Normal:1,Fighting:2,Flying:1,Poison:.5,Ground:1,Rock:1,Bug:1,Ghost:1,Steel:.5,Fire:.5,Water:1,Grass:1,Electric:1,Psychic:1,Ice:1,Dragon:2,Dark:2,Fairy:1}}}